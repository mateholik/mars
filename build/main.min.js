const API_KEY="swK1ZwPxs8cuz4XuHXX7RG7zDFmZZa78YDWs0U0C",API_URL=`https://api.nasa.gov/insight_weather/?api_key=${API_KEY}&feedtype=json&ver=1.0`,spanDate=document.getElementById("date"),spanMaxTemp=document.getElementById("maxTemp"),spanMinTemp=document.getElementById("minTemp"),spanSol=document.getElementById("sol"),spanWindDirectionCardinal=document.getElementById("windDirectionCardinal"),spanWindDirectionDegrees=document.getElementById("windDirectionDegrees"),spanWindSpeed=document.getElementById("windSpeed"),previousDate=document.getElementById("previous-date"),previousMaxTemp=document.getElementById("previous-maxTemp"),previousMinTemp=document.getElementById("previous-minTemp"),previousSol=document.getElementById("previous-sol"),previousSolsTemplate=document.getElementById("previous-sols-template"),previousSolsContainer=document.getElementById("previous-sols");let selectedSolIndex;function displaySelectedSol(e){const n=e[selectedSolIndex];spanDate.innerHTML=formatDate(n.date),spanMaxTemp.innerHTML=formatTemperature(n.maxTemp),spanMinTemp.innerHTML=formatTemperature(n.minTemp),spanSol.innerHTML=n.sol,spanWindDirectionCardinal.innerHTML=n.windDirectionCardinal,spanWindDirectionDegrees.style.setProperty("--direction",n.windDirectionDegrees+"deg"),spanWindSpeed.innerHTML=formatSpeed(n.windSpeed)}function displayPreviousSols(e){previousSolsContainer.innerHTML="",console.log(previousSolsContainer),console.log(previousSolsTemplate),e.forEach((n,t)=>{const o=previousSolsTemplate.content.cloneNode(!0);o.getElementById("previous-date").innerHTML=formatDate(n.date),o.getElementById("previous-maxTemp").innerHTML=formatTemperature(n.maxTemp),o.getElementById("previous-minTemp").innerHTML=formatTemperature(n.minTemp),o.getElementById("previous-sol").innerHTML=n.sol,o.getElementById("previous-button").addEventListener("click",()=>{selectedSolIndex=t,displaySelectedSol(e)}),previousSolsContainer.appendChild(o)})}function formatDate(e){return e.toLocaleDateString("en-EN",{day:"numeric",month:"long"})}function formatTemperature(e){return Math.round(e)}function formatSpeed(e){return Math.round(e)}function getWeather(){return fetch(API_URL).then(e=>e.json()).then(e=>{const{sol_keys:n,validity_checks:t,...o}=e;return Object.entries(o).map(([e,n])=>({sol:e,maxTemp:n.AT.mx,minTemp:n.AT.mn,windSpeed:n.HWS.av,windDirectionDegrees:n.WD.most_common.compass_degrees,windDirectionCardinal:n.WD.most_common.compass_point,date:new Date(n.First_UTC)}))})}getWeather().then(e=>{selectedSolIndex=e.length-1,displaySelectedSol(e),displayPreviousSols(e)}),document.getElementById("open").addEventListener("click",function(){document.getElementById("bottom").classList.toggle("bottom-open"),document.querySelector("#open span").classList.toggle("previous__open-rotate")});